<link rel="stylesheet" href="../styles/style.css" media="screen" title="no title" charset="utf-8">
<link rel="stylesheet" href="../styles/timeline.css" media="screen" title="no title" charset="utf-8">
<div class="row">
  <div class="col-md-8">

    <ul class="timeline">

      <li>
        <div class="timeline-item">
          <div class="timeline-body">
            <textarea class="form-control" ng-model="inputDataPost.isiPost" rows="3" placeholder="Isi Aspirasi Mu"></textarea>
          </div>
          <div class="timeline-footer text-right">
            <button type="button" ng-click="kirimAspirasi(inputDataPost.isiPost)" class="btn btn-success btn-sm">
              Kirim
            </button>
          </div>
        </div>
      </li>

      <li ng-repeat="p in dataPost">
        <i class="fa fa-bullhorn bg-blue"></i>
        <div class="timeline-item">
          <span class="time"><i class="fa fa-clock-o"></i> {{p.tanggal | date:'dd MMMM yyyy, h:mm:ss a'}}</span>
          <h3 class="timeline-header">{{p.nama}}</h3>
          <div class="timeline-body">
            {{p.isiPost}}
          </div>
          <div class='timeline-footer'>
            <a class="btn btn-primary btn-xs" ng-click="kirimLike(p._id)"><i class="fa fa-thumbs-o-up"></i> Suka</a>
            <a class="btn btn-danger btn-xs" ng-click="munculKomentar(p._id)"><i class="fa fa-comments-o"></i> Komentar</a>
          </div>
          <div style="left: 10px; position: relative" ng-if="p.like.length !== 0 && p.komentar.length !== 0 && p.like.length !== undefined && p.komentar.length !== undefined">
            {{p.like.length}} Menyukai dan {{p.komentar.length}} Komentar
          </div>
          <div style="left: 10px; position: relative" ng-if="p.like.length !== 0 && p.komentar.length === 0 && p.like.length !== undefined">
            {{p.like.length}} Menyukai
          </div>
          <div style="left: 10px; position: relative" ng-if="p.like.length === 0 && p.komentar.length !== 0 && p.komentar.length !== undefined">
            {{p.komentar.length}} Komentar
          </div>
          <div class="timeline-footer" ng-if="p._id === dataId">
            <input type="text" ng-model="inputKomentar.komentar" ng-enter="kirimKomentar(inputKomentar, p._id)" class="form-control input-sm" placeholder="Isi Komentar Mu">
            <div ng-repeat="k in p.komentar">
              <h4><span class="label label-default">{{k.nama}}</span> | <span class="label label-info">{{k.komentar}}</span></h4>
            </div>
          </div>
        </div>
      </li>
  </div>
  <div class="col-md-4">
    <div class="panel panel-primary">
      <div class="panel-heading text-center">Time Line</div>
      <div scroll-glue-top="glued">

        <div class="list-group">
          <div ng-repeat="t in dataTimeLine">
            <a href="" class="list-group-item" ng-if="t.like !== undefined">
              {{t.namaLike}} Menyukai aspirasi {{t.nama}}
            </a>
            <a href="" class="list-group-item list-group-item-success" ng-if="t.isiPost !== undefined">
              {{t.nama}} Mengirim Aspirasi
            </a>
            <a href="" class="list-group-item list-group-item-info" ng-if="t.komentar !== undefined">
              {{t.namaKomentator}} Mengomentari aspirasi {{t.nama}}
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
